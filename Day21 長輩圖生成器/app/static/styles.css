
:root{ --bg:#fff7d6; --primary:#ff5e5b; --secondary:#ffd166; --accent:#06d6a0; --ink:#2d2a26; --panel:#ffffff; }
html,body{ height:100%; margin:0; font-family: system-ui, 'Segoe UI','PingFang TC','Noto Sans TC', Arial; background:var(--bg); color:var(--ink);}
.wrap{ min-height:100vh; display:flex; flex-direction:column;}
.header{ background:linear-gradient(90deg,var(--secondary),var(--primary)); padding: 20px 24px; color:#fff; display:flex; align-items:center; justify-content:space-between;}
.brand{ display:flex; align-items:center; gap:14px; font-size:28px; font-weight:800; letter-spacing:2px; text-shadow:1px 2px 0 rgba(0,0,0,.18);}
.brand img{ width:42px; height:42px;}
.main{ flex:1; display:flex; height: calc(100vh - 96px); }
.sidebar{ width:380px; background:var(--panel); overflow-y:auto; border-right:4px solid #f0e4a8; padding:16px;}
.content{ flex:1; overflow:hidden; display:flex; flex-direction:column; gap:16px; padding:16px;}
.tabs{ display:flex; gap:12px; padding-bottom:12px; border-bottom:4px solid #f0e4a8;}
.tab{ flex:1; text-align:center; font-size:22px; padding:12px; background:#ffe7a8; border-radius:12px; cursor:pointer; font-weight:700;}
.tab.active{ background:#ffd166; box-shadow: inset 0 -4px 0 #f5b700;}
.section{ display:none; height:100%; } .section.active{ display:block; }
.input-row{ display:flex; flex-direction:column; gap:8px;} .input-row label{ font-size:20px; font-weight:800;}
textarea, input[type='text']{ font-size:20px; padding:12px; border-radius:12px; border:2px solid #e9d77a; width:100%;}
.row-one{ display:flex; gap:10px; align-items:center; }
.btn-grid{ display:grid; grid-template-columns:1fr 1fr; gap:14px;}
.big{ font-size:22px; padding:14px 18px; border:none; border-radius:16px; background:var(--primary); color:#fff; cursor:pointer; font-weight:800; width:100%;}
button.secondary{ background: var(--accent); color:#083f34;}
.panel{ background:#fff; border-radius:16px; padding:16px; min-height:420px; display:flex; gap:16px; position:relative;}
.leftcol{ width:420px; display:flex; flex-direction:column; gap:12px; }
.preview{ flex:1; background:#fafafa; border:3px dashed #ffd166; border-radius:12px; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden;}
.preview img{ max-width:100%; max-height:100%; object-fit:contain;}
.progress{ height:18px; background:#ffe7a8; border-radius:12px; overflow:hidden; border:1px solid #f5b700;} .progress>div{ height:100%; width:0%; background: repeating-linear-gradient(-45deg,#ff5e5b,#ff5e5b 10px,#ffd166 10px,#ffd166 20px); transition: width .3s ease;}
.badge{ font-size:18px; padding:6px 10px; border-radius:12px; background:#f0f0f0; }
.footer{ padding:8px 16px; background:#fff3b8; border-top:4px solid #f0e4a8; text-align:center; font-size:16px;}
input[type='range']{ width:100%; accent-color: var(--primary); height:28px;}
#btnVoice{ display:flex; align-items:center; justify-content:center; gap:10px; }
#btnVoice svg{ width:26px; height:26px; } #btnVoice.recording{ background:#ff3b30 !important; color:#fff; box-shadow: 0 0 0 4px rgba(255,59,48,.15); }
.gallery{ display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap:10px; }
.gallery .card{ background:#fff; border-radius:8px; padding:6px; border:2px solid #ffe2a8; }
.gallery img{ width:100%; height:120px; object-fit:cover; cursor:pointer; }

/* I2I upload previews (fixed aspect ratio) */
.i2i-previews{ display:flex; gap:12px; margin-top:10px; }
.i2i-box{ position:relative; flex:1; background:#fff; border:2px dashed #ffd166; border-radius:12px; aspect-ratio: 4 / 3; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.i2i-box img{ width:100%; height:100%; object-fit:contain; }
.i2i-title{ position:absolute; top:8px; left:8px; background:rgba(255,209,102,.95); color:#2d2a26; font-weight:800; padding:4px 8px; border-radius:8px; font-size:16px; border:1px solid #f0e4a8; }

/* Layer bar & chips */
.layerbar{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.layerbar .small{ font-size:16px; padding:8px 10px; border-radius:10px; border:none; }
.small.danger{ background:#ff7675; color:#fff; }
#layerBar{ display:flex; gap:8px; flex-wrap:wrap; }
.layer-chip{ display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:12px; background:#ffe9c2; cursor:pointer; border:2px solid transparent; }
.layer-chip.active{ border-color:#ffb703; box-shadow: inset 0 -2px 0 #f29f05; }
.layer-color{ width:14px; height:14px; border-radius:50%; border:1px solid rgba(0,0,0,.15); }

/* I2I theme chips */
.chiprow{ display:flex; flex-wrap:wrap; gap:8px; }
.theme-chip{ padding:8px 10px; border-radius:12px; background:#e7f7ff; border:1px solid #b3e5ff; font-size:16px; cursor:pointer; }
.theme-chip:hover{ background:#d9f2ff; }

/* Overlay panel highlight after new image */
.panel.flash{ animation: panelFlash 1.2s ease-out 1; }
@keyframes panelFlash{ 0%{ box-shadow:0 0 0 8px rgba(255,183,3,.65);} 100%{ box-shadow:0 0 0 0 rgba(255,183,3,0);} }

/* Multiple draggables */
#overlayWrap{ position:absolute; inset:0; pointer-events:none; }
.overlay-item{ position:absolute; left:0; top:0; transform: translate(60px,60px); color:#fff; text-shadow:2px 2px 0 rgba(0,0,0,.6); font-weight:900; user-select:none; cursor:move; white-space:nowrap; padding:2px 4px; border-radius:6px; background:transparent; -webkit-text-stroke:1px rgba(0,0,0,.25); pointer-events:auto; }
.overlay-item.active{ outline: 3px dashed rgba(255,183,3,.9); outline-offset: 2px; border-radius: 6px; }
